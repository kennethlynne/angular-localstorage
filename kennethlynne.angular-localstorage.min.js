"use strict";angular.module("kennethlynne.angular-localstorage",["ngCookies"]).service("localStorage",["$window","$cookies",function(a,b){function c(){if(!("localStorage"in a&&null!==a.localStorage))return!1;try{a.localStorage.setItem("key",""),a.localStorage.removeItem("key")}catch(b){return!1}return!0}var d=a.localStorage,e=function(a){if("string"!=typeof a)throw Error("You must provide a collection name");var e=function(){try{var e=c()?d.getItem(a):b[a];return angular.fromJson(e||"{}")}catch(f){return{}}},f=function(e){var f=angular.toJson(e);c()?d.setItem(a,f):b[a]=f},g=function(a,b){var c=e();c[a]=b,f(c)},h=function(a){return e()[a]};return{set:g,get:h}};return{collection:e,mode:function(){return c()?"localStorage":"cookies"}}}]);